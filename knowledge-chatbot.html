<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knowledge Chatbot - Interactive Proof | dotsat7</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .hero-gradient {
            background: radial-gradient(circle at center, #1e1b4b 0%, #0f172a 100%);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #0f172a;
        }

        ::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }

        .message-anim {
            animation: fadeIn 0.3s ease-out forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .typing-dot {
            animation: typing 1.4s infinite ease-in-out both;
        }

        .typing-dot:nth-child(1) {
            animation-delay: -0.32s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes typing {

            0%,
            80%,
            100% {
                transform: scale(0);
            }

            40% {
                transform: scale(1);
            }
        }
    </style>
</head>

<body class="bg-slate-900 text-slate-50 font-sans hero-gradient min-h-screen flex flex-col">

    <!-- Navigation -->
    <nav class="bg-slate-900/80 backdrop-blur-md shadow-lg border-b border-slate-700 fixed w-full z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center">
                        <a href="index.html" class="flex items-center">
                            <img src="images/dotsat_logo.png" alt="dotsat7 Logo" class="h-16 w-auto mr-3 rounded-full">
                        </a>
                    </div>
                    <div class="hidden md:ml-6 md:flex md:items-center md:space-x-8">
                        <a href="index.html#services"
                            class="text-slate-300 hover:text-purple-400 px-3 py-2 text-sm font-medium transition-colors"
                            data-i18n="nav_services">Services</a>
                        <a href="protovision.html"
                            class="text-slate-300 hover:text-purple-400 px-3 py-2 text-sm font-medium transition-colors"
                            data-i18n="nav_protovision">ProtoVision</a>
                        <a href="pricing.html"
                            class="text-slate-300 hover:text-purple-400 px-3 py-2 text-sm font-medium transition-colors"
                            data-i18n="nav_pricing">Pricing</a>
                        <a href="index.html#about"
                            class="text-slate-300 hover:text-purple-400 px-3 py-2 text-sm font-medium transition-colors"
                            data-i18n="nav_about">About</a>
                        <a href="index.html#contact"
                            class="text-slate-300 hover:text-purple-400 px-3 py-2 text-sm font-medium transition-colors"
                            data-i18n="nav_contact">Contact</a>
                    </div>
                    <div class="-mr-2 flex items-center md:hidden">
                        <button type="button" id="mobile-menu-button"
                            class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none">
                            <i data-feather="menu"></i>
                        </button>
                    </div>
                </div>
            </div>
    </nav>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="hidden md:hidden fixed inset-0 z-20 bg-slate-900/95 backdrop-blur-xl pt-16">
        <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
            <a href="index.html#services"
                class="block px-3 py-2 rounded-md text-base font-medium text-slate-300 hover:text-purple-400 hover:bg-slate-800 transition-colors"
                data-i18n="nav_services">Services</a>
            <a href="protovision.html"
                class="block px-3 py-2 rounded-md text-base font-medium text-slate-300 hover:text-purple-400 hover:bg-slate-800 transition-colors"
                data-i18n="nav_protovision">ProtoVision</a>
            <a href="pricing.html"
                class="block px-3 py-2 rounded-md text-base font-medium text-slate-300 hover:text-purple-400 hover:bg-slate-800 transition-colors"
                data-i18n="nav_pricing">Pricing</a>
            <a href="index.html#about"
                class="block px-3 py-2 rounded-md text-base font-medium text-slate-300 hover:text-purple-400 hover:bg-slate-800 transition-colors"
                data-i18n="nav_about">About</a>
            <a href="index.html#contact"
                class="block px-3 py-2 rounded-md text-base font-medium text-slate-300 hover:text-purple-400 hover:bg-slate-800 transition-colors"
                data-i18n="nav_contact">Contact</a>
        </div>
    </div>

    <!-- Main Content -->
    <main class="flex-grow p-4 md:p-8 flex flex-col items-center pt-24 md:pt-32">
        <div class="max-w-4xl w-full grid md:grid-cols-3 gap-8 h-[600px]">

            <!-- Sidebar / Info -->
            <div class="md:col-span-1 space-y-6">
                <h1 class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-pink-400 to-purple-400 mb-4"
                    data-i18n="sidebar_title">
                    Knowledge Chatbot
                </h1>

                <button onclick="openArchModal()"
                    class="flex items-center px-4 py-2 bg-pink-900/20 rounded-lg text-sm text-pink-400 border border-pink-500/50 hover:bg-pink-900/40 transition-colors mb-4">
                    <i data-feather="layers" class="w-4 h-4 mr-2"></i>
                    <span data-i18n="btn_arch">View Architecture</span>
                </button>

                <p class="text-slate-300 text-sm leading-relaxed" data-i18n="sidebar_desc">
                    Ask questions about internal documents, policies, or technical specs. This demo simulates a RAG
                    system retrieving info from a company knowledge base.
                </p>

                <div class="bg-slate-800/50 p-4 rounded-xl border border-slate-700">
                    <p class="text-xs text-slate-500 uppercase font-bold mb-3" data-i18n="lbl_try_asking">Try asking:
                    </p>
                    <div class="space-y-2">
                        <button onclick="askQuestion('q_remote')"
                            class="w-full text-left text-xs text-pink-300 hover:text-white bg-pink-900/20 hover:bg-pink-900/40 p-2 rounded transition-colors border border-pink-500/20"
                            data-i18n="q_remote">
                            "What is the remote work policy?"
                        </button>
                        <button onclick="askQuestion('q_vpn')"
                            class="w-full text-left text-xs text-pink-300 hover:text-white bg-pink-900/20 hover:bg-pink-900/40 p-2 rounded transition-colors border border-pink-500/20"
                            data-i18n="q_vpn">
                            "How do I reset my VPN password?"
                        </button>
                        <button onclick="askQuestion('q_hr')"
                            class="w-full text-left text-xs text-pink-300 hover:text-white bg-pink-900/20 hover:bg-pink-900/40 p-2 rounded transition-colors border border-pink-500/20"
                            data-i18n="q_hr">
                            "Who is the contact for HR?"
                        </button>
                    </div>
                </div>
            </div>

            <!-- Chat Interface -->
            <div class="md:col-span-2 glass-panel rounded-2xl flex flex-col overflow-hidden shadow-2xl">
                <!-- Header -->
                <div class="p-4 border-b border-slate-700 bg-slate-800/50 flex items-center">
                    <div class="w-3 h-3 bg-green-500 rounded-full mr-2 shadow-[0_0_8px_rgba(34,197,94,0.6)]"></div>
                    <span class="font-semibold text-slate-200" data-i18n="chat_title">Internal Knowledge Base AI</span>
                </div>

                <!-- Messages Area -->
                <div id="chatMessages" class="flex-grow p-4 overflow-y-auto space-y-4">
                    <!-- Intro Message -->
                    <div class="flex items-start">
                        <div
                            class="w-8 h-8 rounded-full bg-pink-600 flex items-center justify-center flex-shrink-0 mr-3">
                            <i data-feather="cpu" class="w-4 h-4 text-white"></i>
                        </div>
                        <div class="bg-slate-800 p-3 rounded-lg rounded-tl-none border border-slate-700 text-sm text-slate-200 max-w-[80%]"
                            data-i18n="intro_msg">
                            Hello! I have access to the company's internal documentation. How can I help you today?
                        </div>
                    </div>
                </div>

                <!-- Input Area -->
                <div class="p-4 bg-slate-800/30 border-t border-slate-700">
                    <form id="chatForm" class="flex gap-2" onsubmit="handleSubmit(event)">
                        <input type="text" id="userInput"
                            class="flex-grow bg-slate-900/50 border border-slate-700 rounded-lg px-4 py-2 text-slate-200 focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none placeholder-slate-500"
                            placeholder="Type your question..." autocomplete="off" data-i18n="placeholder_input">
                        <button type="submit"
                            class="bg-pink-600 hover:bg-pink-700 text-white p-2 rounded-lg transition-colors">
                            <i data-feather="send" class="w-5 h-5"></i>
                        </button>
                    </form>
                </div>
            </div>

        </div>
    </main>

    <!-- Architecture Modal -->
    <div id="archModal" class="fixed inset-0 z-[60] hidden">
        <!-- Backdrop -->
        <div class="absolute inset-0 bg-slate-900/80 backdrop-blur-sm transition-opacity" onclick="closeArchModal()">
        </div>

        <!-- Modal Content -->
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-4xl p-4">
            <div class="glass-panel rounded-2xl p-6 md:p-8 shadow-2xl border border-slate-600 relative">
                <button onclick="closeArchModal()"
                    class="absolute top-4 right-4 text-slate-400 hover:text-white transition-colors">
                    <i data-feather="x" class="w-6 h-6"></i>
                </button>

                <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                    <i data-feather="cpu" class="text-pink-400 mr-3"></i> <span data-i18n="modal_title">RAG
                        Architecture</span>
                </h2>

                <!-- Diagram Flow -->
                <div class="relative overflow-x-auto pb-4">
                    <div class="flex flex-col md:flex-row items-center justify-between min-w-[600px] gap-4 md:gap-0">

                        <!-- Step 1 -->
                        <div class="flex flex-col items-center text-center group">
                            <div
                                class="w-16 h-16 rounded-xl bg-slate-800 border border-slate-600 flex items-center justify-center mb-3 shadow-lg group-hover:border-blue-400 transition-colors">
                                <i data-feather="message-square" class="text-blue-400"></i>
                            </div>
                            <div class="text-sm font-semibold text-slate-200" data-i18n="step_query">User Query</div>
                            <div class="text-xs text-slate-500" data-i18n="step_query_sub">Natural Language</div>
                        </div>

                        <!-- Arrow -->
                        <div class="hidden md:block h-0.5 w-12 bg-slate-700 relative">
                            <div
                                class="absolute right-0 -top-1 w-2 h-2 border-t-2 border-r-2 border-slate-700 transform rotate-45">
                            </div>
                        </div>
                        <div class="md:hidden h-8 w-0.5 bg-slate-700 relative"></div>

                        <!-- Step 2 -->
                        <div class="flex flex-col items-center text-center group">
                            <div
                                class="w-16 h-16 rounded-xl bg-slate-800 border border-slate-600 flex items-center justify-center mb-3 shadow-lg group-hover:border-yellow-400 transition-colors">
                                <i data-feather="hash" class="text-yellow-400"></i>
                            </div>
                            <div class="text-sm font-semibold text-slate-200" data-i18n="step_embed">Embeddings</div>
                            <div class="text-xs text-slate-500" data-i18n="step_embed_sub">OpenAI Ada-002</div>
                        </div>

                        <!-- Arrow -->
                        <div class="hidden md:block h-0.5 w-12 bg-slate-700 relative">
                            <div
                                class="absolute right-0 -top-1 w-2 h-2 border-t-2 border-r-2 border-slate-700 transform rotate-45">
                            </div>
                        </div>
                        <div class="md:hidden h-8 w-0.5 bg-slate-700 relative"></div>

                        <!-- Step 3 -->
                        <div class="flex flex-col items-center text-center group">
                            <div
                                class="w-16 h-16 rounded-xl bg-gradient-to-br from-pink-900/50 to-purple-900/50 border border-pink-500/50 flex items-center justify-center mb-3 shadow-lg group-hover:border-pink-400 transition-colors relative overflow-hidden">
                                <div class="absolute inset-0 bg-pink-500/10 animate-pulse"></div>
                                <i data-feather="database" class="text-white relative z-10"></i>
                            </div>
                            <div class="text-sm font-semibold text-white" data-i18n="step_vector">Vector DB</div>
                            <div class="text-xs text-pink-300" data-i18n="step_vector_sub">Pinecone / Weaviate</div>
                        </div>

                        <!-- Arrow -->
                        <div class="hidden md:block h-0.5 w-12 bg-slate-700 relative">
                            <div
                                class="absolute right-0 -top-1 w-2 h-2 border-t-2 border-r-2 border-slate-700 transform rotate-45">
                            </div>
                        </div>
                        <div class="md:hidden h-8 w-0.5 bg-slate-700 relative"></div>

                        <!-- Step 4 -->
                        <div class="flex flex-col items-center text-center group">
                            <div
                                class="w-16 h-16 rounded-xl bg-slate-800 border border-slate-600 flex items-center justify-center mb-3 shadow-lg group-hover:border-green-400 transition-colors">
                                <i data-feather="cpu" class="text-green-400"></i>
                            </div>
                            <div class="text-sm font-semibold text-slate-200" data-i18n="step_llm">LLM Generation</div>
                            <div class="text-xs text-slate-500" data-i18n="step_llm_sub">GPT-4 / Claude</div>
                        </div>

                    </div>
                </div>

                <div class="mt-8 pt-6 border-t border-slate-700/50 text-sm text-slate-400">
                    <p><strong class="text-slate-200" data-i18n="modal_tech">Tech Stack:</strong> LangChain, Pinecone,
                        OpenAI API, React.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        feather.replace();

        const chatMessages = document.getElementById('chatMessages');
        const userInput = document.getElementById('userInput');

        // Translations & Language Logic
        const translations = {
            en: {
                "nav_services": "Services",
                "nav_protovision": "ProtoVision",
                "nav_pricing": "Pricing",
                "nav_about": "About",
                "nav_contact": "Contact",
                "sidebar_title": "Knowledge Chatbot",
                "btn_arch": "View Architecture",
                "sidebar_desc": "Ask questions about internal documents, policies, or technical specs. This demo simulates a RAG system retrieving info from a company knowledge base.",
                "lbl_try_asking": "Try asking:",
                "q_remote": "\"What is the remote work policy?\"",
                "q_vpn": "\"How do I reset my VPN password?\"",
                "q_hr": "\"Who is the contact for HR?\"",
                "chat_title": "Internal Knowledge Base AI",
                "intro_msg": "Hello! I have access to the company's internal documentation. How can I help you today?",
                "placeholder_input": "Type your question...",
                "modal_title": "RAG Architecture",
                "step_query": "User Query",
                "step_query_sub": "Natural Language",
                "step_embed": "Embeddings",
                "step_embed_sub": "OpenAI Ada-002",
                "step_vector": "Vector DB",
                "step_vector_sub": "Pinecone / Weaviate",
                "step_llm": "LLM Generation",
                "step_llm_sub": "GPT-4 / Claude",
                "modal_tech": "Tech Stack:"
            },
            pt: {
                "nav_services": "Serviços",
                "nav_protovision": "ProtoVision",
                "nav_pricing": "Preços",
                "nav_about": "Sobre",
                "nav_contact": "Contato",
                "sidebar_title": "Chatbot de Conhecimento",
                "btn_arch": "Ver Arquitetura",
                "sidebar_desc": "Faça perguntas sobre documentos internos, políticas ou especificações técnicas. Esta demonstração simula um sistema RAG recuperando informações de uma base de conhecimento corporativa.",
                "lbl_try_asking": "Tente perguntar:",
                "q_remote": "\"Qual é a política de trabalho remoto?\"",
                "q_vpn": "\"Como redefino minha senha da VPN?\"",
                "q_hr": "\"Quem é o contato do RH?\"",
                "chat_title": "IA de Base de Conhecimento Interna",
                "intro_msg": "Olá! Tenho acesso à documentação interna da empresa. Como posso ajudar você hoje?",
                "placeholder_input": "Digite sua pergunta...",
                "modal_title": "Arquitetura RAG",
                "step_query": "Consulta do Usuário",
                "step_query_sub": "Linguagem Natural",
                "step_embed": "Embeddings",
                "step_embed_sub": "OpenAI Ada-002",
                "step_vector": "Banco de Vetores",
                "step_vector_sub": "Pinecone / Weaviate",
                "step_llm": "Geração de LLM",
                "step_llm_sub": "GPT-4 / Claude",
                "modal_tech": "Stack Tecnológico:"
            }
        };

        const knowledgeBase = {
            en: {
                "remote work": "According to the **Hybrid Work Policy (2025)**, employees are allowed to work remotely up to 3 days a week. Core office days are Tuesday and Thursday. Full remote requests require approval from a Director.",
                "vpn": "To reset your VPN password:\n1. Go to `auth.company.internal`\n2. Click on 'Forgot Password'\n3. Verify your identity via 2FA\n4. Set a new password adhering to the complexity requirements.",
                "hr": "The primary HR contact for general inquiries is **Sarah Jenkins** (s.jenkins@company.com). For payroll issues, please contact the **Finance Department** directly via the #finance-help slack channel.",
                "holiday": "All employees receive 20 days of paid annual leave, plus 8 public holidays. Unused days can be carried over (max 5 days) to the first quarter of the following year.",
                "default": "I searched the internal knowledge base but couldn't find a specific document matching your query. Could you try rephrasing or asking about a specific policy?"
            },
            pt: {
                "remote work": "De acordo com a **Política de Trabalho Híbrido (2025)**, os funcionários podem trabalhar remotamente até 3 dias por semana. Os dias presenciais obrigatórios são terça e quinta-feira. Solicitações de trabalho 100% remoto exigem aprovação de um Diretor.",
                "vpn": "Para redefinir sua senha de VPN:\n1. Acesse `auth.company.internal`\n2. Clique em 'Esqueci minha senha'\n3. Verifique sua identidade via 2FA\n4. Defina uma nova senha seguindo os requisitos de complexidade.",
                "hr": "O contato principal do RH para dúvidas gerais é **Sarah Jenkins** (s.jenkins@company.com). Para problemas de folha de pagamento, entre em contato diretamente com o **Departamento Financeiro** através do canal #finance-help no Slack.",
                "holiday": "Todos os funcionários recebem 20 dias de férias anuais remuneradas, mais 8 feriados públicos. Dias não utilizados podem ser acumulados (máx 5 dias) para o primeiro trimestre do ano seguinte.",
                "default": "Pesquisei na base de conhecimento interna mas não encontrei um documento específico correspondente à sua consulta. Você poderia tentar reformular ou perguntar sobre uma política específica?"
            }
        };

        function loadLanguage() {
            const lang = localStorage.getItem('preferredLanguage') || 'en';
            applyTranslations(lang);
        }

        function applyTranslations(lang) {
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[lang] && translations[lang][key]) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = translations[lang][key];
                    } else {
                        element.innerHTML = translations[lang][key];
                    }
                }
            });
        }

        loadLanguage();

        function askQuestion(key) {
            const lang = localStorage.getItem('preferredLanguage') || 'en';
            // Use translation, remove quotes for the input box
            const text = translations[lang][key].replace(/^"|"$/g, '');
            userInput.value = text;
            handleSubmit(new Event('submit'));
        }

        function handleSubmit(e) {
            e.preventDefault();
            const text = userInput.value.trim();
            if (!text) return;

            // Add User Message
            addMessage(text, 'user');
            userInput.value = '';

            // Loading Indicator
            const loadingId = addLoading();

            const lang = localStorage.getItem('preferredLanguage') || 'en';
            const kb = knowledgeBase[lang];

            // Mock Delay & Response
            setTimeout(() => {
                removeLoading(loadingId);

                let response = kb.default;
                const lowerText = text.toLowerCase();

                // Keywords in EN and PT
                if (lowerText.includes('remote') || lowerText.includes('home') || lowerText.includes('remoto') || lowerText.includes('casa')) response = kb["remote work"];
                else if (lowerText.includes('vpn') || lowerText.includes('password') || lowerText.includes('poassword') || lowerText.includes('senha')) response = kb["vpn"];
                else if (lowerText.includes('hr') || lowerText.includes('human resources') || lowerText.includes('rh') || lowerText.includes('recursos humanos')) response = kb["hr"];
                else if (lowerText.includes('vacation') || lowerText.includes('holiday') || lowerText.includes('leave') || lowerText.includes('férias') || lowerText.includes('folga')) response = kb["holiday"];

                addMessage(response, 'bot');
            }, 1500);
        }

        function addMessage(text, sender) {
            const div = document.createElement('div');
            div.className = `flex items-start message-anim ${sender === 'user' ? 'justify-end' : ''}`;

            const content = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\n/g, '<br>');

            if (sender === 'bot') {
                div.innerHTML = `
                    <div class="w-8 h-8 rounded-full bg-pink-600 flex items-center justify-center flex-shrink-0 mr-3">
                        <i data-feather="cpu" class="w-4 h-4 text-white"></i>
                    </div>
                    <div class="bg-slate-800 p-3 rounded-lg rounded-tl-none border border-slate-700 text-sm text-slate-200 max-w-[80%] shadow-md">
                        ${content}
                    </div>
                `;
            } else {
                div.innerHTML = `
                    <div class="bg-pink-900/30 p-3 rounded-lg rounded-tr-none border border-pink-500/30 text-sm text-white max-w-[80%] shadow-md">
                        ${content}
                    </div>
                `;
            }

            chatMessages.appendChild(div);
            feather.replace();
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function addLoading() {
            const id = 'loading-' + Date.now();
            const div = document.createElement('div');
            div.id = id;
            div.className = "flex items-start message-anim";
            div.innerHTML = `
                 <div class="w-8 h-8 rounded-full bg-pink-600 flex items-center justify-center flex-shrink-0 mr-3">
                    <i data-feather="cpu" class="w-4 h-4 text-white"></i>
                </div>
                <div class="bg-slate-800 p-4 rounded-lg rounded-tl-none border border-slate-700 flex space-x-1">
                    <div class="w-2 h-2 bg-slate-400 rounded-full typing-dot"></div>
                    <div class="w-2 h-2 bg-slate-400 rounded-full typing-dot"></div>
                    <div class="w-2 h-2 bg-slate-400 rounded-full typing-dot"></div>
                </div>
            `;
            chatMessages.appendChild(div);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            feather.replace();
            return id;
        }

        function removeLoading(id) {
            const el = document.getElementById(id);
            if (el) el.remove();
        }

        // Mobile menu toggle
        document.getElementById('mobile-menu-button').addEventListener('click', function () {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
            feather.replace();
        });

        // Close mobile menu when clicking a link
        document.querySelectorAll('#mobile-menu a').forEach(link => {
            link.addEventListener('click', function () {
                document.getElementById('mobile-menu').classList.add('hidden');
            });
        });

        function openArchModal() {
            document.getElementById('archModal').classList.remove('hidden');
            feather.replace();
        }

        function closeArchModal() {
            document.getElementById('archModal').classList.add('hidden');
        }
    </script>
</body>

</html>